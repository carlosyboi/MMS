UILib={}UILib.__index=UILib;ESP_FONTSIZE=7;BLACK=Color3.new(0,0,0)local a=game:GetService('Players').LocalPlayer;local b=a:GetMouse()local function c(d,e,f)if d>f then return f elseif e<e then return e else return d end end;local function g(h,i,j)local k=math.floor(h*6)local l=h*6-k;local m=j*(1-i)local n=j*(1-l*i)local o=j*(1-(1-l)*i)k=k%6;local p,q,f;if k==0 then p,q,f=j,o,m elseif k==1 then p,q,f=n,j,m elseif k==2 then p,q,f=m,j,o elseif k==3 then p,q,f=m,n,j elseif k==4 then p,q,f=o,m,j else p,q,f=j,m,n end;return{p*255,q*255,f*255}end;local function r()return Vector2.new(b.X,b.Y)end;local function s(e,f,o)return e+(f-e)*o end;local function t(u)for v,w in pairs(u)do w.Visible=false end end;local function x(u)for v,w in ipairs(u)do w:Remove()end end;function UILib.new(y)repeat wait(1/9999)until isrbxactive()assert(type(y)=="table","[assert] CreateWindow: Parameter must be a table!")local self=setmetatable({},UILib)local z=y.Rainbow or y.RGB or false;local A=y.Name or y.Title;local B=y.Resizable or false;local C=y.WatermarkActivity or false;assert(type(A)=="string"or type(A)=="number","[assert] CreateWindow: Window name parameter must be a string or number!")assert(type(z)=="boolean","[ERROR] CreateWindow: Rainbow parameter must be a boolean!")self._inputs={['m1']={id=Enum.KeyCode.MouseButton1,held=false,click=false},['m2']={id=Enum.KeyCode.MouseButton2,held=false,click=false},['a']={id=Enum.KeyCode.A,held=false,click=false},['b']={id=Enum.KeyCode.B,held=false,click=false},['c']={id=Enum.KeyCode.C,held=false,click=false},['d']={id=Enum.KeyCode.D,held=false,click=false},['e']={id=Enum.KeyCode.E,held=false,click=false},['f']={id=Enum.KeyCode.F,held=false,click=false},['g']={id=Enum.KeyCode.G,held=false,click=false},['h']={id=Enum.KeyCode.H,held=false,click=false},['i']={id=Enum.KeyCode.I,held=false,click=false},['j']={id=Enum.KeyCode.J,held=false,click=false},['k']={id=Enum.KeyCode.K,held=false,click=false},['l']={id=Enum.KeyCode.L,held=false,click=false},['m']={id=Enum.KeyCode.M,held=false,click=false},['n']={id=Enum.KeyCode.N,held=false,click=false},['o']={id=Enum.KeyCode.O,held=false,click=false},['p']={id=Enum.KeyCode.P,held=false,click=false},['q']={id=Enum.KeyCode.Q,held=false,click=false},['r']={id=Enum.KeyCode.R,held=false,click=false},['s']={id=Enum.KeyCode.S,held=false,click=false},['t']={id=Enum.KeyCode.T,held=false,click=false},['u']={id=Enum.KeyCode.U,held=false,click=false},['v']={id=Enum.KeyCode.V,held=false,click=false},['w']={id=Enum.KeyCode.W,held=false,click=false},['x']={id=Enum.KeyCode.X,held=false,click=false},['y']={id=Enum.KeyCode.Y,held=false,click=false},['z']={id=Enum.KeyCode.Z,held=false,click=false}}self._keyCodeMap={}for D,E in pairs(self._inputs)do if E.id~=nil then self._keyCodeMap[E.id]=E else warn("Key: ["..tostring(D).."] ID is nil")end end;local F=game:GetService("UserInputService")F.InputBegan:Connect(function(G,H)if H then return end;local E=self._keyCodeMap[G.KeyCode]if E then E.held=true;E.click=true end end)F.InputEnded:Connect(function(G)local E=self._keyCodeMap[G.KeyCode]if E then E.held=false;E.click=false end end)self._active_tab=nil;self._open=true;self._watermark=true;self._base_opacity=0;self._dragging=false;self._drag_offset=Vector2.new(0,0)self._active_dropdown=nil;self._active_colorpicker=nil;self._clipboard_color=nil;self._tick=os.clock()self.RainbowHue=0;self.CurrentRainbowColor=Color3.fromRGB(0,0,0)self.Rainbow=z;self._statusWindows={}self._Notifications={}self.identity=A;self._watermark_activity=C;self.x=250;self.y=60;self.w=y.Size and y.Size.X or 500;self.h=y.Size and y.Size.Y or 700;self._color_accent=Color3.fromRGB(255,127,0)self._color_text=Color3.fromRGB(255,255,255)self._color_crust=Color3.fromRGB(0,0,0)self._color_border=Color3.fromRGB(25,25,25)self._color_surface=Color3.fromRGB(38,38,38)self._color_overlay=Color3.fromRGB(76,76,76)self._title_h=25;self._tab_h=20;self._padding=6;self._gradient_detail=80;local I=Drawing.new('Square')I.Filled=true;I.Color=self._color_surface;local J=Drawing.new('Square')J.Filled=false;J.Thickness=1;J.Color=self._color_crust;local K=Drawing.new('Square')K.Filled=false;K.Thickness=1;K.Color=self._color_border;local L=Drawing.new('Square')L.Filled=true;L.Color=self._color_border;local M=Drawing.new('Text')M.Text=self.identity;M.Outline=true;M.Color=self._color_text;local N=Drawing.new('Square')N.Filled=true;N.Color=self._color_surface;local O=Drawing.new('Square')O.Filled=true;O.Color=self._color_accent;local P=Drawing.new('Square')P.Filled=false;P.Thickness=1;P.Color=self._color_crust;local Q=Drawing.new('Square')Q.Filled=false;Q.Thickness=1;Q.Color=self._color_border;local R=Drawing.new('Text')R.Text=A;R.Outline=true;R.Color=self._color_text;self._tree={['_tabs']={},['_drawings']={J,K,I,L,M,N,O,P,Q,R}}return self end;function UILib._GetTextBounds(S)return#S*ESP_FONTSIZE,ESP_FONTSIZE end;function UILib._IsMouseWithinBounds(T,U)local V=r()return V.x>=T.x and V.x<=T.x+U.x and V.y>=T.y and V.y<=T.y+U.y end;function UILib:_RemoveDropdown()if self._active_dropdown then local W=self._active_dropdown['_drawings']x(W)self._active_dropdown=nil end end;function UILib:_RemoveColorpicker()if self._active_colorpicker then local X=self._active_colorpicker['_drawings']x(X)self._active_colorpicker=nil end end;function UILib:_SpawnDropdown(Y,Z,_,a0,a1,a2)if self._active_dropdown then self:_RemoveDropdown()end;local I=Drawing.new('Square')I.Filled=true;I.Color=self._color_surface;local J=Drawing.new('Square')J.Filled=false;J.Thickness=1;J.Color=self._color_crust;local K=Drawing.new('Square')K.Filled=false;K.Thickness=1;K.Color=self._color_border;local a3={I,J,K}for v,a4 in ipairs(Z)do local a5=Drawing.new('Text')a5.Outline=true;a5.Color=self._color_text;a5.Text=a4;table.insert(a3,a5)end;local a6={}for v,a7 in ipairs(Z)do a6[a7]=false end;for v,a8 in ipairs(Y)do a6[a8]=true end;self._active_dropdown={['choices']=a6,['multi']=_,['callback']=a0,['position']=a1,['w']=a2,['_drawings']=a3}end;function UILib:_SpawnColorpicker(Y,a9,a0)if self._active_colorpicker then self:_RemoveColorpicker()end;local I=Drawing.new('Square')I.Filled=true;I.Color=self._color_surface;local J=Drawing.new('Square')J.Filled=false;J.Thickness=1;J.Color=self._color_crust;local K=Drawing.new('Square')K.Filled=false;K.Thickness=1;K.Color=self._color_border;local aa=Drawing.new('Square')aa.Filled=true;aa.Color=self._color_border;local ab=Drawing.new('Text')ab.Outline=true;ab.Color=self._color_text;ab.Text=a9;local ac=Drawing.new('Square')ac.Filled=true;ac.Color=self._color_surface;local a3={I,J,K,aa,ab,ac}for v=1,self._gradient_detail*3 do local ad=Drawing.new('Square')ad.Filled=true;table.insert(a3,ad)end;local ae=Drawing.new('Circle')ae.Filled=false;ae.Thickness=3;ae.Radius=6;ae.NumSides=20;ae.Color=self._color_crust;local af=Drawing.new('Circle')af.Filled=false;af.Thickness=1;af.Radius=6;af.NumSides=20;af.Color=self._color_border;local ag=Drawing.new('Square')ag.Filled=true;ag.Color=self._color_border;local ah=Drawing.new('Square')ah.Filled=false;ah.Thickness=1;ah.Color=self._color_surface;local ai=Drawing.new('Square')ai.Filled=false;ai.Thickness=1;ai.Color=self._color_crust;for v,aj in ipairs{af,ae,ag,ai,ah}do table.insert(a3,aj)end;self._active_colorpicker={['callback']=a0,['_pallete_pos']=nil,['_slider_y']=0,['_drawings']=a3}end;function UILib:ToggleWatermark(ak)self._watermark=ak end;function UILib:ToggleMenu(ak)self._open=ak end;function UILib:IsMenuOpen()return self._open end;function UILib:Tab(al)local am=Drawing.new('Square')am.Color=self._color_border;am.Filled=true;local an=Drawing.new('Square')an.Color=BLACK;an.Filled=true;local aj=Drawing.new('Square')aj.Color=self._color_accent;aj.Filled=true;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=al;table.insert(self._tree['_tabs'],{['name']=al,['_sections']={},['_drawings']={am,an,aj,ao}})if self._active_tab==nil then self._active_tab=al end;return al end;function UILib:Section(ap,al)for v,aq in ipairs(self._tree['_tabs'])do if aq['name']==ap then local I=Drawing.new('Square')I.Filled=true;I.Color=self._color_surface;local J=Drawing.new('Square')J.Filled=false;J.Thickness=1;J.Color=self._color_crust;local K=Drawing.new('Square')K.Filled=false;K.Thickness=1;K.Color=self._color_overlay;local M=Drawing.new('Text')M.Text=al;M.Outline=true;M.Color=self._color_text;local ar={['name']=al,['_items']={},['_drawings']={I,J,K,M}}table.insert(aq._sections,ar)return al end end end;function UILib:_AddToSection(ap,as,at,au,a0,a3,av)for v,aq in pairs(self._tree._tabs)do if aq.name==ap then for v,ar in pairs(aq._sections)do if ar.name==as then local aw={['type']=at,['value']=au,['callback']=a0,['_drawings']=a3}if av then for ax,ay in pairs(av)do aw[ax]=ay end end;table.insert(ar._items,aw)return end end end end end;function UILib:AddToggle(ap,as,ab,az,defaultValue,a0)local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Thickness=1;aA.Filled=false;local aB=Drawing.new('Square')aB.Color=self._color_accent;aB.Filled=true;local aC=Drawing.new('Square')aC.Color=BLACK;aC.Filled=true;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;local aD=Drawing.new('Square')aD.Color=self._color_crust;aD.Filled=true;aD.Visible=false;local aE=Drawing.new('Text')aE.Color=self._color_text;aE.Outline=true;aE.Visible=false;aE.Text=az or""local aF=self:_AddToSection(ap,as,'checkbox',defaultValue,a0,{aA,aB,aC,ao,aD,aE})end;function UILib:Slider(ap,as,ab,defaultValue,a0,aG,aH,aI,aJ)local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Filled=true;local aK=Drawing.new('Square')aK.Color=self._color_accent;aK.Filled=true;local aL=Drawing.new('Square')aL.Color=BLACK;aL.Filled=true;local au=Drawing.new('Text')au.Color=self._color_text;au.Outline=true;au.Text=ab;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;self:_AddToSection(ap,as,'slider',defaultValue,a0,{aA,aK,aL,au,ao},{['min']=aG,['max']=aH,['step']=aI,['appendix']=aJ})end;function UILib:Choice(ap,as,ab,defaultValue,a0,Z,_)local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Thickness=1;aA.Filled=false;local aK=Drawing.new('Square')aK.Color=self._color_crust;aK.Filled=true;local aM=Drawing.new('Text')aM.Color=self._color_text;aM.Outline=true;aM.Text=ab;local aN=Drawing.new('Text')aN.Color=self._color_text;aN.Outline=true;aN.Text=ab;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;self:_AddToSection(ap,as,'choice',defaultValue,a0,{aA,aK,aM,aN,ao},{['choices']=Z,['multi']=_})end;function UILib:Colorpicker(ap,as,ab,defaultValue,a0)local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Thickness=1;aA.Filled=false;local aK=Drawing.new('Square')aK.Color=self._color_crust;aK.Filled=true;local an=Drawing.new('Square')an.Color=BLACK;an.Filled=true;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;self:_AddToSection(ap,as,'colorpicker',defaultValue,a0,{aA,aK,an,ao},{['label']=ab})end;function UILib:AddButton(ap,as,ab,a0)local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Thickness=1;aA.Filled=false;local aK=Drawing.new('Square')aK.Color=self._color_crust;aK.Filled=true;local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;self:_AddToSection(ap,as,'button',defaultValue,a0,{aA,aK,ao},{['label']=ab})end;function UILib:Label(ap,as,ao,aO)if aO==nil then aO=self._color_text end;local ab=Drawing.new('Text')ab.Color=aO;ab.Outline=true;ab.Text=''local aP=120;local aQ=""for aR in string.gmatch(ao,"([^\n]+)")do local aS=aR;ab.Text=aS;while ab.TextBounds.X>aP and#aS>0 do aS=aS:sub(1,-2)ab.Text=aS end;aQ=aQ..aS.."\n"end;ab.Text=aQ;self:_AddToSection(ap,as,'label',aQ,nil,{ab})end;function UILib:Keybind(ap,as,ab,defaultValue,a0,aT)local ao=Drawing.new('Text')ao.Color=self._color_text;ao.Outline=true;ao.Text=ab;local aA=Drawing.new('Square')aA.Color=self._color_crust;aA.Thickness=1;aA.Filled=false;local aK=Drawing.new('Square')aK.Color=self._color_crust;aK.Filled=true;local ax=Drawing.new('Text')ax.Color=self._color_text;ax.Outline=true;self:_AddToSection(ap,as,'key',defaultValue,a0,{ao,aA,aK,ax},{['mode']=aT or'Hold',['_listening']=false,['_state']=nil})end;function UILib:CreateSettingsTab(aU)local aV=self:Tab(aU or'Menu')local aW=self:Section(aV,'Settings')self:Keybind(aV,aW,'Open key','x',function(ak)self:ToggleMenu(ak)end,'Toggle')self:AddToggle(aV,aW,'Watermark','',true,function(ak)self:ToggleWatermark(ak)end)self:AddToggle(aV,aW,'Debug','',false,nil)self:AddButton(aV,aW,'Unload',function()self:Destroy()end)local aX=self:Section(aV,'Theming')local aY={'X11','Nord','Dracula','Catppuccin'}self:Choice(aV,aX,'Preset theme',{aY[1]},function(aM)local aZ=self._tree._tabs[#self._tree._tabs]._sections[2]local a_=aZ._items[2]local b0=aZ._items[3]local b1=aZ._items[4]local b2=aZ._items[5]local b3=aZ._items[6]local b4=aM[1]if b4==aY[1]then a_.value={255,128,0}b0.value={38,38,38}b1.value={26,26,26}b2.value={77,77,77}b3.value={0,0,0}elseif b4==aY[2]then a_.value={135,206,235}b0.value={49,54,60}b1.value={72,80,90}b2.value={61,66,73}b3.value={88,96,106}elseif b4==aY[3]then a_.value={243,67,54}b0.value={40,44,59}b1.value={64,71,89}b2.value={29,31,45}b3.value={72,73,95}elseif b4==aY[4]then a_.value={240,160,200}b0.value={48,47,63}b1.value={72,71,89}b2.value={63,62,80}b3.value={33,32,44}end;a_.callback(Color3.fromRGB(unpack(a_.value)))b0.callback(Color3.fromRGB(unpack(b0.value)))b1.callback(Color3.fromRGB(unpack(b1.value)))b2.callback(Color3.fromRGB(unpack(b2.value)))b3.callback(Color3.fromRGB(unpack(b3.value)))end,aY,false)self:Colorpicker(aV,aX,'Accent',{255,128,0},function(b5)self._color_accent=b5 end)self:Colorpicker(aV,aX,'Base',{38,38,38},function(b5)self._color_surface=b5 end)self:Colorpicker(aV,aX,'Inner stroke',{25,25,25},function(b5)self._color_border=b5 end)self:Colorpicker(aV,aX,'Outer stroke',{76,76,76},function(b5)self._color_overlay=b5 end)self:Colorpicker(aV,aX,'Crust',{0,0,0},function(b5)self._color_crust=b5 end)return aV,aW,aX end;function UILib:Notify(ao,b6,aO)local b6=b6 or 3;local b7=aO or Color3.fromRGB(255,255,255)local b8={}local b9={Box=Drawing.new("Square"),Outline=Drawing.new("Square"),Fill=Drawing.new("Square"),Progress=Drawing.new("Square"),TextDraw=Drawing.new("Text")}b9.Box.Filled=true;b9.Box.Color=self._color_border;b9.Box.Visible=true;b9.Outline.Filled=true;b9.Outline.Color=Color3.fromRGB(40,40,40)b9.Outline.Visible=true;b9.Fill.Filled=true;b9.Fill.Color=Color3.fromRGB(25,25,25)b9.Fill.Visible=true;b9.Progress.Filled=true;b9.Progress.Color=self.AccentColor or Color3.fromRGB(255,255,255)b9.Progress.Visible=true;b9.TextDraw.Text=ao;b9.TextDraw.Color=b7;b9.TextDraw.Visible=true;b9.TextDraw.Outline=true;local E={ID=b8,Elements=b9}table.insert(self._Notifications,E)spawn(function()local ba=os.clock()local bb=0;while bb<b6 do local bc=task.wait(0.02)bb=os.clock()-ba;local bd=math.clamp(1-bb/b6,0,1)local be=0;for k,j in ipairs(self._Notifications)do if j.ID==b8 then be=k;break end end;if be>0 then local bf=workspace.CurrentCamera.ViewportSize;local bg=bf.X;local bh=bf.Y;local bi=#ao*8;local bj=bi+24;local bk=28;local bl=bg*0.015;local bm=bh*0.08;local bn=35;local bo=bm+(be-1)*bn;local bp=Vector2.new(bl,bo)b9.Box.Position=bp;b9.Box.Size=Vector2.new(bj,bk)b9.Outline.Position=bp+Vector2.new(1,1)b9.Outline.Size=Vector2.new(bj-2,bk-2)b9.Fill.Position=bp+Vector2.new(2,2)b9.Fill.Size=Vector2.new(bj-4,bk-4)b9.TextDraw.Position=bp+Vector2.new(10,6)b9.Progress.Position=bp+Vector2.new(2,bk-4)b9.Progress.Size=Vector2.new((bj-4)*bd,2)end end;for k,j in ipairs(self._Notifications)do if j.ID==b8 then table.remove(self._Notifications,k)break end end;for v,bq in pairs(b9)do bq:Remove()end end)end;function UILib:CreateStatusWindow(M,br)local bs=self;bs._statusWindows=bs._statusWindows or{}local bt={Visible=false,Position=br or Vector2.new(20,60),_title=M,_labels={},_parts={},_allDrawings={},_padding=bs._padding or 6}local function bu(type,bv)local bw=Drawing.new(type)for bx,j in pairs(bv)do bw[bx]=j end;table.insert(bt._allDrawings,bw)return bw end;bt._parts.base=bu('Square',{Filled=true})bt._parts.cursor=bu('Square',{Filled=true})bt._parts.crust=bu('Square',{Filled=false,Thickness=1})bt._parts.border=bu('Square',{Filled=false,Thickness=1})bt._parts.titleText=bu('Text',{Text=M,Outline=true})function bt:AddLabel(ao)local by=bu('Text',{Text=ao,Outline=true,Color=bs._color_text})table.insert(self._labels,{drawing=by})return{SetText=function(self,o)by.Text=o end,Remove=function()self:RemoveLabel(by)end,_drawing=by}end;function bt:RemoveLabel(G)local bz=type(G)=="table"and G._drawing or G;if not bz then return end;bz.Visible=false;local v=bz.Remove and bz:Remove()or bz.Destroy and bz:Destroy()for k=#self._labels,1,-1 do if self._labels[k].drawing==bz then table.remove(self._labels,k)end end;for k=#self._allDrawings,1,-1 do if self._allDrawings[k]==bz then table.remove(self._allDrawings,k)end end end;function bt:Destroy()self.Visible=false;for v,bw in ipairs(self._allDrawings)do bw:Remove()end end;table.insert(bs._statusWindows,bt)return bt end;function UILib:Step()local bA=math.max(os.clock()-self._tick,0.0035)local V=r()local bB=self._open;local bC=bB and self._inputs['m1'].click;local bD=bB and self._inputs['m2'].click;local bE=bB and self._inputs['m1'].held;local bF=self._base_opacity;local bG=bF>0.22;self._base_opacity=c(s(bF,bB==true and 1 or 0,bA*11),0,1)setrobloxinput(not bB)if self.RainbowHue>1530 then self.RainbowHue=0 else self.RainbowHue=self.RainbowHue+3 end;if self.RainbowHue<=255 then self.CurrentRainbowColor={255,self.RainbowHue,0}elseif self.RainbowHue<=510 then self.CurrentRainbowColor={510-self.RainbowHue,255,0}elseif self.RainbowHue<=765 then self.CurrentRainbowColor={0,255,self.RainbowHue-510}elseif self.RainbowHue<=1020 then self.CurrentRainbowColor={0,1020-self.RainbowHue,255}elseif self.RainbowHue<=1275 then self.CurrentRainbowColor={self.RainbowHue-1020,0,255}elseif self.RainbowHue<=1530 then self.CurrentRainbowColor={255,0,1530-self.RainbowHue}end;if self.Rainbow then self._color_accent=Color3.fromRGB(unpack(self.CurrentRainbowColor))end;local N=self._tree['_drawings'][6]local O=self._tree['_drawings'][7]local P=self._tree['_drawings'][8]local Q=self._tree['_drawings'][9]local bH=self._tree['_drawings'][10]if self._watermark then local bI={self.identity}local C=self._watermark_activity;if C then for v,bJ in ipairs(C)do if type(bJ)=='function'then local bK=bJ()if bK~=nil and#bK>0 then table.insert(bI,bK)end end end end;local R=table.concat(bI,' | ')local bL,bM=self._GetTextBounds(R)local bN=Vector2.new(20,20)local bO=Vector2.new(bL+self._padding*3,bM+self._padding*3)N.Position=bN;N.Size=bO;N.Visible=true;N.Color=self._color_surface;P.Position=bN;P.Size=bO;P.Visible=true;P.Color=self._color_crust;Q.Position=bN+Vector2.new(1,1)Q.Size=bO+Vector2.new(-2,-2)Q.Visible=true;Q.Color=self._color_border;O.Position=bN+Vector2.new(2,2)O.Size=Vector2.new(bO.x-4,1)O.Visible=true;O.Color=self._color_accent;bH.Position=bN+Vector2.new(2+self._padding,2+self._padding)bH.Text=R;bH.Visible=true;bH.Color=self._color_text else N.Visible=false;P.Visible=false;Q.Visible=false;O.Visible=false;bH.Visible=false end;if self._statusWindows then for v,bP in ipairs(self._statusWindows)do if bP.Visible then local bQ=bP._padding;local bR=bP.Position;local bS=bP._parts;local bT,bU=self._GetTextBounds(bS.titleText.Text)local bV,bW=bT,bU+bQ;for v,bX in ipairs(bP._labels)do local bY,bZ=self._GetTextBounds(bX.drawing.Text)bV=math.max(bV,bY)bW=bW+bZ+5 end;local b_=Vector2.new(bV+bQ*3,bW+bQ*2)bS.base.Position=bR;bS.base.Size=b_;bS.base.Color=self._color_surface;bS.base.Visible=true;bS.crust.Position=bR;bS.crust.Size=b_;bS.crust.Color=self._color_crust;bS.crust.Visible=true;bS.border.Position=bR+Vector2.new(1,1)bS.border.Size=b_+Vector2.new(-2,-2)bS.border.Color=self._color_border;bS.border.Visible=true;bS.cursor.Position=bR+Vector2.new(2,2)bS.cursor.Size=Vector2.new(b_.X-4,1)bS.cursor.Color=self._color_accent;bS.cursor.Visible=true;bS.titleText.Position=bR+Vector2.new(bQ+2,bQ+2)bS.titleText.Color=self._color_text;bS.titleText.Visible=true;local c0=bR.Y+bQ+bU+5;for v,bX in ipairs(bP._labels)do bX.drawing.Position=Vector2.new(bR.X+bQ+2,c0)bX.drawing.Visible=true;local v,bZ=self._GetTextBounds(bX.drawing.Text)c0=c0+bZ+5 end else for v,bw in ipairs(bP._allDrawings)do bw.Visible=false end end end end;if self._active_colorpicker then local X=self._active_colorpicker['_drawings']local c1=X[1]local c2=X[2]local c3=X[3]local c4=X[4]local c5=X[5]local c6=X[6]c6.Visible=false;local c7=Vector2.new(self.x+self.w+self._padding*2,self.y)local c8=Vector2.new(200,170+self._title_h)c1.Position=c7;c1.Size=c8;c1.Transparency=bF;c1.Visible=bG;c1.Color=self._color_surface;c2.Position=c7;c2.Size=c8;c2.Transparency=bF;c2.Visible=bG;c2.Color=self._color_crust;c3.Position=c7+Vector2.new(1,1)c3.Size=c8-Vector2.new(2,2)c3.Transparency=bF;c3.Visible=bG;c3.Color=self._color_border;c4.Position=c7+Vector2.new(1,1)c4.Size=Vector2.new(c8.x-2,self._title_h-3)c4.Transparency=bF;c4.Visible=bG;c4.Color=self._color_border;c5.Position=c7+Vector2.new(self._padding,self._padding)c5.Transparency=bF;c5.Visible=bG;c5.Color=self._color_text;local c9=c7+Vector2.new(self._padding,self._title_h+self._padding)local ca=c8.y-self._title_h-self._padding*2;for k=1,self._gradient_detail do local ad=X[6+k]local aI=1-(k-1)/(self._gradient_detail-1)ad.Size=Vector2.new(ca*aI,ca)ad.Position=c9;local h=c(self._active_colorpicker['_slider_y']/ca,0,1)ad.Color=Color3.fromHSV(h,aI,1)ad.Transparency=bF;ad.Visible=bG end;for k=1,self._gradient_detail do local ad=X[6+self._gradient_detail+k]local aI=1-k/self._gradient_detail;ad.Size=Vector2.new(ca,ca*aI)ad.Position=c9+Vector2.new(0,ca*(1-aI))ad.Color=BLACK;ad.Transparency=bF*1/(self._gradient_detail/3)ad.Visible=bG end;local cb=c8.x-ca-self._padding*4;local cc=c9+Vector2.new(c8.x-cb-self._padding*2.5,0)for k=1,self._gradient_detail do local ad=X[6+self._gradient_detail*2+k]local aI=1-(k-1)/self._gradient_detail;ad.Size=Vector2.new(cb,ca*aI)ad.Position=cc;ad.Color=Color3.fromHSV(aI,1,1)ad.Transparency=bF;ad.Visible=bG end;local cd=6+self._gradient_detail*3;local ce=X[cd+1]local cf=X[cd+2]local cg=X[cd+3]local ch=X[cd+4]local ci=X[cd+5]if bE then if self._IsMouseWithinBounds(c9,Vector2.new(ca,ca))then self._active_colorpicker['_pallete_pos']=V elseif self._IsMouseWithinBounds(cc,Vector2.new(cb,ca))then self._active_colorpicker['_slider_y']=V.y-c9.y end end;local cj=self._active_colorpicker['_pallete_pos']or c9;local ck=cc+Vector2.new(-2,self._active_colorpicker['_slider_y'])local cl=Vector2.new(c((cj.x-c9.x)/ca,0,1),c((cj.y-c9.y)/ca,0,1))local cm=c(self._active_colorpicker['_slider_y']/ca,0,1)local h=cm;local i=cl.x;local j=1-cl.y;local b5=g(h,i,j)if bE then if self._active_colorpicker['callback']then self._active_colorpicker['callback'](b5)end end;ce.Position=cj;ce.Color=self._color_text;ce.Visible=bG;cf.Position=cj;cf.Color=self._color_crust;cf.Visible=bG;local cn=Vector2.new(cb+4,4)cg.Size=cn;cg.Position=ck;cg.Color=self._color_surface;cg.Visible=bG;ch.Size=cn;ch.Position=ck;ch.Color=self._color_crust;ch.Visible=bG;ci.Size=cn+Vector2.new(-2,-2)ci.Position=ck+Vector2.new(1,1)ci.Color=self._color_border;ci.Visible=bG;if bC and not self._IsMouseWithinBounds(c7,c8)then self:_RemoveColorpicker()end;bC=false end;if self._active_dropdown then local co=self._active_dropdown['choices']local cp=self._active_dropdown['multi']local cq=self._active_dropdown['callback']local cr=self._active_dropdown['position']local cs=self._active_dropdown['w']local W=self._active_dropdown['_drawings']local ct=W[1]local cu=W[2]local cv=W[3]local cw=self._padding;local cx=bC;local k=1;for a7,cy in pairs(co)do local cz,cA=self._GetTextBounds(a7)local cB=W[3+k]local cC=cr+Vector2.new(self._padding,cw)local cD=Vector2.new(cs,cA+self._padding)cB.Position=cC;cB.Color=cy and self._color_accent or self._color_text;cB.Text=a7;cB.Visible=bG;if bC and self._IsMouseWithinBounds(cC,cD)then cx=not cp;if not cp then for cE,v in pairs(co)do co[cE]=false end end;co[a7]=not cy;if cq then local cF={}for cE,cy in pairs(co)do if cy==true then table.insert(cF,cE)end end;cq(cF)end end;cw=cw+cA*2+self._padding;k=k+1 end;if cx then self:_RemoveDropdown()else ct.Position=cr;ct.Size=Vector2.new(cs,cw)ct.Transparency=bF;ct.Visible=bG;ct.Color=self._color_surface;cu.Position=cr;cu.Size=Vector2.new(cs,cw)cu.Transparency=bF;cu.Visible=bG;cu.Color=self._color_crust;cv.Position=cr+Vector2.new(1,1)cv.Size=Vector2.new(cs-2,cw-2)cv.Transparency=bF;cv.Visible=bG;cv.Color=self._color_border end;bC=false end;local cG=self._tree['_drawings'][1]local cH=self._tree['_drawings'][2]local cI=self._tree['_drawings'][3]local cJ=self._tree['_drawings'][4]local cK=self._tree['_drawings'][5]cI.Position=Vector2.new(self.x,self.y)cI.Size=Vector2.new(self.w,self.h)cI.Transparency=bF;cI.Visible=bG;cI.Color=self._color_surface;cH.Position=Vector2.new(self.x+1,self.y+1)cH.Size=Vector2.new(self.w-2,self.h-2)cH.Transparency=bF;cH.Visible=bG;cH.Color=self._color_border;cG.Position=Vector2.new(self.x,self.y)cG.Size=Vector2.new(self.w,self.h)cG.Transparency=bF;cG.Visible=bG;cG.Color=self._color_crust;cJ.Position=Vector2.new(self.x+2,self.y+2)cJ.Size=Vector2.new(self.w-4,self._title_h-4)cJ.Transparency=bF;cJ.Visible=bG;cJ.Color=self._color_border;local cL,bU=self._GetTextBounds('')cK.Position=Vector2.new(self.x+7,self.y+self._title_h/2-bU+2)cK.Transparency=bF;cK.Visible=bG;cK.Color=self._color_text;local cM=Vector2.new(self.x,self.y)local cN=Vector2.new(self.w,self._title_h)if self._IsMouseWithinBounds(cM,cN)then if bC then self._dragging=true;self._drag_offset=V-cM end end;if self._dragging then if bE then self.x=V.x-self._drag_offset.x;self.y=V.y-self._drag_offset.y else self._dragging=false end;bC=false end;local cO=#self._tree['_tabs']for cP,aq in ipairs(self._tree['_tabs'])do local ap=aq['name']local cQ=aq['_drawings']local cR=self._active_tab==ap;local cS=cQ[1]local cT=cQ[2]local cU=cQ[3]local cV=cQ[4]local cW=(self.w-self._padding*2-(cO-1)*2)/cO;local cX=self._tab_h;local cY=Vector2.new(self.x+self._padding+(cP-1)*(cW+2),self.y+self._title_h+self._padding)local cZ=Vector2.new(cW,cX)cS.Position=cY;cS.Size=cZ;cS.Transparency=bF;cS.Visible=bG;cS.Color=self._color_border;cT.Position=cY+Vector2.new(0,cX-8)cT.Size=Vector2.new(cW,8)cT.Transparency=0.05*bF;cT.Visible=bG;cU.Position=cY;cU.Size=Vector2.new(cW,1)cU.Transparency=bF;cU.Visible=cR and bG;cU.Color=self._color_accent;cV.Position=cY+Vector2.new(4,cX/2-ESP_FONTSIZE/2)cV.Transparency=bF;cV.Visible=bG;cV.Color=self._color_text;if bC and self._IsMouseWithinBounds(cY,cZ)then self._active_tab=ap end;local c_=self._padding;local d0=self._padding;for d1,ar in ipairs(aq['_sections'])do local d2=ar['_drawings']local d3=ar['_items']for v,d4 in ipairs(d3)do if d4['type']=='key'then local d5=d4['value']local d6=d4['callback']local d7=self._inputs[d5]if not d7 and self._keyCodeMap then d7=self._keyCodeMap[d5]end;if d7 and d5~='unbound'and d6 then local d8=d4['mode']local d9=d4['state']if d8=='Hold'then d9=d7['held']elseif d8=='Toggle'then if d7['click']then d9=not d9 end elseif d8=='Always'then d9=true end;if d9~=d4['state']then d4['state']=d9;d6(d9)end end end end;if cR then local da=self._padding*2;local db=(d1+1)%2;local dc=self.w/2-self._padding*1.5;local dd=Vector2.new(self.x+self._padding+self._padding*db+dc*db,self.y+self._title_h+self._tab_h+self._padding*2+(db==1 and c_ or d0))for v,de in ipairs(d3)do local at=de['type']local df=de['_drawings']local d5=de['value']local d6=de['callback']local dg=dd+Vector2.new(10,da)if at=='checkbox'then local dh=df[1]local di=df[2]local dj=df[3]local dk=df[4]local aD=df[5]local aE=df[6]local dl=Vector2.new(14,14)dh.Position=dg;dh.Size=dl;dh.Transparency=bF;dh.Visible=bG;di.Position=dg+Vector2.new(1,1)di.Size=dl-Vector2.new(2,2)di.Transparency=bF;di.Visible=d5==true and bG;di.Color=self._color_accent;dj.Position=dg+Vector2.new(1,dl.y-2)dj.Size=Vector2.new(dl.x-2,1)dj.Transparency=0.3*bF;dj.Visible=d5==true and bG;dj.Color=self._color_border;dk.Position=dg+Vector2.new(dl.x+8,0)dk.Transparency=bF;dk.Visible=bG;dk.Color=self._color_text;if self._IsMouseWithinBounds(dg,dl)then dh.Color=self._color_accent;if bC then de['value']=not de['value']if d6 then d6(de['value'])end end;if aE.Text and aE.Text~=""then aE.Position=Vector2.new(V.X+10,V.Y-18)aE.Visible=true;aD.Position=aE.Position-Vector2.new(3,2)aD.Size=Vector2.new(aE.TextBounds.X+6,aE.TextBounds.Y+4)aD.Visible=true end else dh.Color=self._color_crust;aE.Visible=false;aD.Visible=false end;da=da+dl.y+8 elseif at=='slider'then local dm=df[1]local dn=df[2]local dp=df[3]local dq=df[4]local dr=df[5]local aG=de['min']local aH=de['max']local aI=de['step']local aJ=de['appendix']local ds=dc-self._padding*3;local dt=20;local du=Vector2.new(ds,dt)local dv,dw=self._GetTextBounds('')dr.Position=dg;dr.Transparency=bF;dr.Visible=bG;dr.Color=self._color_text;dm.Position=dg+Vector2.new(0,dw+10)dm.Size=du;dm.Transparency=bF;dm.Visible=bG;dm.Color=self._color_crust;local dx=d5~=aG and bG;local dy=(d5-(de.min or 0))/((de.max or 1)-(de.min or 0))dy=c(dy,0,1)dn.Position=dg+Vector2.new(1,dw+11)dn.Size=Vector2.new(math.max(ds*dy-2,0),dt-2)dn.Transparency=bF;dn.Visible=dx;dn.Color=self._color_accent;dp.Position=dg+Vector2.new(1,dw+dt+7)dp.Size=Vector2.new(math.max(ds*dy-2,0),2)dp.Transparency=0.15*bF;dp.Visible=dx;local dz=tostring(d5)..(aJ or'')local dA,dB=self._GetTextBounds(dz)dq.Position=dg+Vector2.new(ds-dA-6,dB/2+dt-2)dq.Text=dz;dq.Transparency=bF;dq.Visible=bG;if self._IsMouseWithinBounds(dg+Vector2.new(0,dw+10),du)then dq.Color=self._color_accent;if bE then local dC=V.x-dg.x;local bd=dC/ds;bd=c(bd,0,1)local dD=aG+(aH-aG)*bd;dD=math.floor(dD/aI+0.5)*aI;dD=math.max(aG,math.min(aH,dD))if dD~=de['value']then de['value']=dD;if d6 then d6(dD)end end end else dq.Color=self._color_text end;da=da+dt+18+dw elseif at=='choice'then local dE=df[1]local dF=df[2]local dG=df[3]local dH=df[4]local dI=df[5]local Z=de['choices']local _=de['multi']local dv,dw=self._GetTextBounds('')local dJ=dc-self._padding*3;local cA=20;local dK=Vector2.new(dJ,cA)local dL=dg+Vector2.new(0,dw+10)dI.Position=dg;dI.Transparency=bF;dI.Visible=bG;dI.Color=self._color_text;local dM=table.concat(d5,', ')local dN,dO=self._GetTextBounds(dM)dG.Position=dg+Vector2.new(4,dw/2+cA-2)dG.Text=dN>dJ-32 and'...'or dM;dG.Transparency=bF;dG.Visible=bG;dG.Color=self._color_text;dE.Position=dL;dE.Size=dK;dE.Transparency=bF;dE.Visible=bG;dF.Position=dL+Vector2.new(2,2)dF.Size=dK-Vector2.new(4,4)dF.Transparency=bF;dF.Visible=bG;dF.Color=self._color_crust;local dP='<'local dQ,dR=self._GetTextBounds(dP)dH.Position=dg+Vector2.new(dJ-dQ-4,dR/2+cA-2)dH.Text=dP;dH.Transparency=bF;dH.Visible=bG;dH.Color=self._color_text;if self._IsMouseWithinBounds(dL,dK)then dE.Color=self._color_accent;if bC then local cq=function(dS)de['value']=dS;if d6 then d6(de['value'])end end;self:_SpawnDropdown(d5,Z,_,cq,dL+Vector2.new(0,cA),dJ)elseif bD then local cq=function(dT)de['value']={}d6(de['value'])end;self:_SpawnDropdown({},{'Clear'},false,cq,V,60)end else dE.Color=self._color_crust end;da=da+cA+18+dw elseif at=='button'then local dU=df[1]local dV=df[2]local dW=df[3]local dX=de['label']local dY,dZ=self._GetTextBounds(dX)local d_=Vector2.new(dY+self._padding*2,20)dW.Position=dg+Vector2.new(self._padding,4)dW.Transparency=bF;dW.Visible=bG;dW.Color=self._color_text;dU.Position=dg;dU.Size=d_;dU.Transparency=bF;dU.Visible=bG;dV.Position=dg+Vector2.new(2,2)dV.Size=d_-Vector2.new(4,4)dV.Transparency=bF;dV.Visible=bG;dV.Color=self._color_crust;if self._IsMouseWithinBounds(dg,d_)then if bC and d6 then d6(de['value'])end;dU.Color=self._color_accent else dU.Color=self._color_crust end;da=da+22+dZ elseif at=='label'then local ab=df[1]ab.Position=dg;ab.Visible=bG;ab.Outline=true;da=da+7+18*#ab.Text:split("\n")elseif at=='colorpicker'then local e0=df[1]local e1=df[2]local e2=df[3]local c5=df[4]local dl=Vector2.new(30,14)local e3=dg+Vector2.new(dc-dl.x-self._padding*3,0)e0.Position=e3;e0.Size=dl;e0.Transparency=bF;e0.Visible=bG;e0.Color=self._color_crust;e1.Position=e3+Vector2.new(1,1)e1.Size=dl-Vector2.new(2,2)e1.Transparency=bF;e1.Color=Color3.fromRGB(unpack(de['value']))e1.Visible=bG;e2.Position=e3+Vector2.new(4,4)e2.Size=dl-Vector2.new(8,8)e2.Transparency=bF*0.25;e2.Visible=bG;c5.Position=dg;c5.Transparency=bF;c5.Visible=bG;c5.Color=self._color_text;if self._IsMouseWithinBounds(e3,dl)then if bC then local e4=function(b5)de['value']=b5;if d6 then d6(Color3.fromRGB(unpack(de['value'])))end end;self:_SpawnColorpicker(de['value'],de['label'],e4)elseif bD then self:_SpawnDropdown({},{'Copy','Paste'},false,function(aM)local e5=aM[1]if e5=='Copy'then self._clipboard_color=d5 elseif e5=='Paste'then de['value']=self._clipboard_color or d5;if d6 then d6(Color3.fromRGB(unpack(de['value'])))end end end,V,60)end end;da=da+dl.y+10 elseif at=='key'then local e6=df[1]local e7=df[2]local e8=df[3]local e9=df[4]local dX=de['_listening']==true and'...'or d5:upper()local dY,dZ=self._GetTextBounds(dX)local d_=Vector2.new(dY+self._padding*2,20)local ea=dg+Vector2.new(dc-d_.x-self._padding*3,0)e9.Position=ea+Vector2.new(self._padding,4)e9.Transparency=bF;e9.Text=dX;e9.Visible=bG;e9.Color=self._color_text;e7.Position=ea;e7.Size=d_;e7.Transparency=bF;e7.Visible=bG;e8.Position=ea+Vector2.new(2,2)e8.Size=d_-Vector2.new(4,4)e8.Transparency=bF;e8.Visible=bG;e8.Color=self._color_crust;e6.Position=dg+Vector2.new(0,dZ/2+1)e6.Transparency=bF;e6.Visible=bG;e6.Color=self._color_text;if self._IsMouseWithinBounds(ea,d_)then if bC then de['_listening']=true;self._inputs['m1']['click']=false end;e7.Color=self._color_accent else e7.Color=self._color_crust end;if de['_listening']then for eb,ec in pairs(self._inputs)do if ec['click']then de['value']=eb;de['_listening']=false;break end end end;da=da+22+dZ end end;local ed=d2[1]local ee=d2[2]local ef=d2[3]local eg=d2[4]ee.Position=dd;ee.Size=Vector2.new(dc,da)ee.Transparency=bF;ee.Visible=bG;ee.Color=self._color_crust;ef.Position=dd+Vector2.new(1,1)ef.Size=Vector2.new(dc-2,da-2)ef.Transparency=bF;ef.Visible=bG;ef.Color=self._color_overlay;local eh,ei=self._GetTextBounds('')eg.Position=dd+Vector2.new(10,-ei/2)eg.Transparency=bF;eg.Visible=bG;eg.Color=self._color_text;ed.Visible=false;da=da+self._padding;if db==1 then c_=c_+da else d0=d0+da end else t(d2)for v,de in ipairs(d3)do t(de['_drawings'])end end end end;for D,ec in pairs(self._inputs)do if isrbxactive()then if ec.click then ec.click=false end;if ec.held then end else ec.click=false;ec.held=false end end;self._tick=os.clock()end;function UILib:Destroy()for v,w in pairs(self._tree['_drawings'])do w:Remove()end;self:_RemoveDropdown()self:_RemoveColorpicker()for v,aq in pairs(self._tree['_tabs'])do if aq['_drawings']then for v,w in pairs(aq['_drawings'])do w:Remove()end end;if aq._sections then for v,ar in pairs(aq['_sections'])do for v,w in pairs(ar['_drawings'])do w:Remove()end;if ar._items then for v,aw in pairs(ar._items)do for v,w in pairs(aw['_drawings'])do w:Remove()end end end end end end;self._tree=nil;setrobloxinput(true)end;return UILib
